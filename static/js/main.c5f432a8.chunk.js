(this["webpackJsonpreact_movies-list-fetch-movies"]=this["webpackJsonpreact_movies-list-fetch-movies"]||[]).push([[0],{16:function(e,t,i){},19:function(e,t,i){},20:function(e,t,i){},21:function(e,t,i){},22:function(e,t,i){"use strict";i.r(t);var c=i(8),n=i.n(c),a=(i(15),i(16),i(10)),r=i(9),s=i(2),o=i(6),d=i.n(o),l=i(1),j="https://www.omdbapi.com/?apikey=".concat("1b11639d");var u=i(0),m=Object(l.createContext)({movies:[],searchField:"",updateSearch:function(){},onSearchMovie:function(){},findMovie:null,findMovieError:!1,findMovieLoading:!1,onAddMovie:function(){},onResetData:function(){}}),b=function(e){var t=e.children,i=Object(l.useState)([]),c=Object(s.a)(i,2),n=c[0],o=c[1],b=Object(l.useState)(null),v=Object(s.a)(b,2),h=v[0],f=v[1],O=Object(l.useState)(!1),x=Object(s.a)(O,2),p=x[0],g=x[1],N=Object(l.useState)(!1),y=Object(s.a)(N,2),M=y[0],w=y[1],S=Object(l.useState)(""),C=Object(s.a)(S,2),F=C[0],k=C[1],D=function(e){w(!1),k(e)},I=function(){var e=Object(r.a)(d.a.mark((function e(t){var i,c,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,r=t,fetch("".concat(j,"&t=").concat(r)).then((function(e){return e.json()})).catch((function(){return{Response:"False",Error:"unexpected error"}}));case 4:if(!(i=e.sent).hasOwnProperty("Error")){e.next=9;break}return w(!0),k(""),e.abrupt("return");case 9:"https://via.placeholder.com/360x270.png?text=no%20preview",n="N/A"!==(c=i).Poster?c.Poster:"https://via.placeholder.com/360x270.png?text=no%20preview",a="https://www.imdb.com/title/".concat(c.imdbID),f({title:c.Title,description:c.Plot,imdbUrl:a,imgUrl:n,imdbId:c.imdbID}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),w(!0);case 19:return e.prev=19,g(!1),e.finish(19);case 22:case"end":return e.stop()}var r}),e,null,[[1,16,19,22]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){k(""),f(null)},P=function(e){o((function(t){return[].concat(Object(a.a)(t),[e])})),E()},A=Object(l.useMemo)((function(){return{movies:n,searchField:F,updateSearch:D,onSearchMovie:I,findMovieLoading:p,findMovieError:M,findMovie:h,onAddMovie:P,onResetData:E}}),[n,F,h,M,p]);return Object(u.jsx)(m.Provider,{value:A,children:t})},v=(i(19),i(20),function(e){var t=e.movie;return Object(u.jsxs)("div",{className:"card","data-cy":"movieCard",children:[Object(u.jsx)("div",{className:"card-image",children:Object(u.jsx)("figure",{className:"image is-4by3",children:Object(u.jsx)("img",{"data-cy":"moviePoster",src:t.imgUrl,alt:"Film logo"})})}),Object(u.jsxs)("div",{className:"card-content",children:[Object(u.jsxs)("div",{className:"media",children:[Object(u.jsx)("div",{className:"media-left",children:Object(u.jsx)("figure",{className:"image is-48x48",children:Object(u.jsx)("img",{src:"images/imdb-logo.jpeg",alt:"imdb"})})}),Object(u.jsx)("div",{className:"media-content",children:Object(u.jsx)("p",{className:"title is-8","data-cy":"movieTitle",children:t.title})})]}),Object(u.jsxs)("div",{className:"content","data-cy":"movieDescription",children:[t.description,Object(u.jsx)("br",{}),Object(u.jsx)("a",{href:t.imdbUrl,"data-cy":"movieURL",children:"IMDB"})]})]})]})}),h=function(e){var t=e.movies;return Object(u.jsx)("div",{className:"movies",children:t.map((function(e){return Object(u.jsx)(v,{movie:e},e.imdbId)}))})},f=(i(21),i(7)),O=i.n(f),x=function(){var e=Object(l.useContext)(m),t=e.searchField,i=e.updateSearch,c=e.onSearchMovie,n=e.findMovie,a=e.findMovieError,r=e.findMovieLoading,s=e.onAddMovie,o=e.movies,d=e.onResetData,j=0===t.length;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("form",{className:"find-movie",children:[Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("label",{className:"label",htmlFor:"movie-title",children:"Movie title"}),Object(u.jsx)("div",{className:"control",children:Object(u.jsx)("input",{"data-cy":"titleField",type:"text",id:"movie-title",placeholder:"Enter a title to search",className:O()({input:!0,"is-danger":a}),value:t,onChange:function(e){return i(e.target.value)}})}),a&&Object(u.jsx)("p",{className:"help is-danger","data-cy":"errorMessage",children:"Can't find a movie with such a title"})]}),Object(u.jsxs)("div",{className:"field is-grouped",children:[Object(u.jsx)("div",{className:"control",children:Object(u.jsx)("button",{"data-cy":"searchButton",type:"submit",className:O()({"button is-light":!r,"button is-loading":r}),disabled:j,onClick:function(e){return function(e){e.preventDefault(),c(t)}(e)},children:"".concat(n?"Search again":"Find a movie")})}),n&&Object(u.jsx)("div",{className:"control",children:Object(u.jsx)("button",{"data-cy":"addButton",type:"button",className:"button is-primary",onClick:function(){return e=n,o.some((function(e){return e.imdbId===(null===n||void 0===n?void 0:n.imdbId)}))||s(e),void d();var e},children:"Add to the list"})})]})]}),n&&Object(u.jsxs)("div",{className:"container","data-cy":"previewContainer",children:[Object(u.jsx)("h2",{className:"title",children:"Preview"}),Object(u.jsx)(v,{movie:n})]})]})},p=function(){var e=Object(l.useContext)(m).movies;return Object(u.jsxs)("div",{className:"page",children:[Object(u.jsx)("div",{className:"page-content",children:Object(u.jsx)(h,{movies:e})}),Object(u.jsx)("div",{className:"sidebar",children:Object(u.jsx)(x,{})})]})},g=function(){return Object(u.jsx)(b,{children:Object(u.jsx)(p,{})})};n.a.render(Object(u.jsx)(g,{}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.c5f432a8.chunk.js.map